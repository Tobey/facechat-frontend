{"ast":null,"code":"var _jsxFileName = \"/Users/tobeyasinugo/dev/facechat_django/frontend/src/pages/login.js\";\nimport React from 'react';\nimport { Form, Grid, Button, Container, Segment, Header, Image, Message } from 'semantic-ui-react';\nimport { history } from '../helpers/history';\nimport { Fetch } from '../helpers/auth-request';\nimport { handleResponse } from '../helpers/handle-response';\nimport { authenticationService } from '../services/auth.service';\nconst style = {\n  h1: {\n    marginTop: '3em'\n  },\n  h2: {\n    margin: '4em 0em 2em'\n  },\n  h3: {\n    marginTop: '2em',\n    padding: '2em 0em'\n  },\n  last: {\n    marginBottom: '300px'\n  }\n};\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props); // redirect to home if already logged in\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      authenticationService.login(this.state.username, this.state.password).then(auth => {\n        if (auth) {\n          console.log('login success', auth);\n          this.props.history.push('/chat/maya-jama/');\n        }\n      });\n    };\n\n    this.handletest = e => {\n      e.preventDefault();\n      Fetch('http://localhost:8002/api/user/me/');\n      const requestOptions = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      Fetch('http://localhost:8002/api/user/me/').then(handleResponse).then(data => {\n        console.log('me');\n        console.log(data);\n      });\n    };\n\n    if (authenticationService.currentUser) {\n      console.log('user ', authenticationService.currentUser);\n      authenticationService.logout();\n      this.props.history.push('/chat/mayajama/');\n    }\n\n    this.state = {\n      username: null,\n      password: null,\n      auth: null\n    };\n  }\n\n  componentDidMount() {\n    authenticationService.auth.subscribe(auth => this.setState({\n      auth\n    }));\n  }\n\n  logout() {\n    authenticationService.logout();\n    history.push('/login/');\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Grid, {\n      textAlign: \"center\",\n      style: {\n        height: '100vh'\n      },\n      verticalAlign: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      style: {\n        maxWidth: 450\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h2\",\n      color: \"teal\",\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: \"/logo.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }), \" Log-in to your account\"), /*#__PURE__*/React.createElement(Form, {\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      stacked: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      icon: \"user\",\n      iconPosition: \"left\",\n      placeholder: \"Username or Email\",\n      onChange: e => this.setState({\n        username: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      icon: \"lock\",\n      iconPosition: \"left\",\n      placeholder: \"Password\",\n      type: \"password\",\n      onChange: e => this.setState({\n        password: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Form.Button, {\n      fluid: true,\n      type: \"submit\",\n      color: \"teal\",\n      size: \"large\",\n      disabled: !(this.state.username && this.state.password),\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 20\n      }\n    }, \"Submit\"))), /*#__PURE__*/React.createElement(Message, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }, \"New to us? \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/register/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 28\n      }\n    }, \"Sign Up\"))), /*#__PURE__*/React.createElement(Button, {\n      fluid: true,\n      color: \"red\",\n      type: \"submit\",\n      disabled: !(this.state.username && this.state.password),\n      onClick: this.handletest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, \"Test\"));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/tobeyasinugo/dev/facechat_django/frontend/src/pages/login.js"],"names":["React","Form","Grid","Button","Container","Segment","Header","Image","Message","history","Fetch","handleResponse","authenticationService","style","h1","marginTop","h2","margin","h3","padding","last","marginBottom","Login","Component","constructor","props","handleSubmit","e","preventDefault","login","state","username","password","then","auth","console","log","push","handletest","requestOptions","method","headers","data","currentUser","logout","componentDidMount","subscribe","setState","render","height","maxWidth","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, Grid, Button, Container, Segment, Header, Image, Message } from 'semantic-ui-react'\n\nimport { history } from '../helpers/history';\nimport { Fetch } from '../helpers/auth-request';\nimport { handleResponse } from '../helpers/handle-response';\nimport { authenticationService } from '../services/auth.service';\n\nconst style = {\n    h1: {\n      marginTop: '3em',\n    },\n    h2: {\n      margin: '4em 0em 2em',\n    },\n    h3: {\n      marginTop: '2em',\n      padding: '2em 0em',\n    },\n    last: {\n      marginBottom: '300px',\n    },\n  }\n\n  class Login extends React.Component {\n    constructor(props) {\n      super(props);\n\n      // redirect to home if already logged in\n      if (authenticationService.currentUser) { \n        console.log('user ', authenticationService.currentUser)\n        authenticationService.logout();\n\n         this.props.history.push('/chat/mayajama/');\n         \n      }\n\n      this.state = {\n          username: null,\n          password: null,\n          auth: null\n      };\n  }\n\n  componentDidMount() {\n    authenticationService.auth.subscribe(auth => this.setState({ auth }));\n  }\n\n\n  logout() {\n      authenticationService.logout();\n      history.push('/login/');\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    authenticationService.login(this.state.username, this.state.password).then(auth => {\n      if (auth) {\n        console.log('login success', auth)\n        this.props.history.push('/chat/maya-jama/');\n      }\n    })\n         \n    \n  }\n\n  handletest = (e) => {\n    e.preventDefault();\n    Fetch('http://localhost:8002/api/user/me/')\n\n    const requestOptions = {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n  };\n\n    Fetch('http://localhost:8002/api/user/me/')\n    .then(handleResponse)\n    .then(data => { \n      console.log('me')\n      console.log(data)\n    })\n  \n  }\n\n  \n    render() {\n      return (\n           <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n            <Grid.Column style={{ maxWidth: 450 }}>\n              <Header as='h2' color='teal' textAlign='center'>\n                <Image src='/logo.png' /> Log-in to your account\n              </Header>\n              <Form size='large'>\n                <Segment stacked>\n                  <Form.Input \n                   fluid\n                   icon='user'\n                   iconPosition='left' \n                   placeholder='Username or Email'\n                   onChange={(e) => this.setState({username: e.target.value})}\n                                      />\n                  <Form.Input\n                    fluid\n                    icon='lock'\n                    iconPosition='left'\n                    placeholder='Password'\n                    type='password'\n                    onChange={(e) => this.setState({password: e.target.value})}\n                  />\n                   <Form.Button\n                    fluid\n                    type='submit' \n                    color='teal'\n                    size='large'\n                    disabled = {!(this.state.username && this.state.password)}\n                    onClick={this.handleSubmit} >Submit\n                    </Form.Button>\n\n\n       \n                </Segment>\n              </Form>\n\n              \n              <Message>\n                New to us? <a href='/register/'>Sign Up</a>\n              </Message>\n            </Grid.Column>\n\n            <Button\n                    fluid\n                    color='red'\n                    type='submit' \n                    disabled = {!(this.state.username && this.state.password)}\n                    onClick={this.handletest} >Test\n              </Button>\n          </Grid>\n        );\n      }\n    \n    }\n    export default Login"]},"metadata":{},"sourceType":"module"}