{"ast":null,"code":"var _jsxFileName = \"/Users/tobeyasinugo/dev/facechat_django/frontend/src/pages/login.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Form, Checkbox, Button, Container, Segment, Header, Input } from 'semantic-ui-react';\nimport { history } from '../helpers/history';\nimport { Fetch } from '../helpers/auth-request';\nimport { handleResponse } from '../helpers/handle-response';\nimport { authenticationService } from '../services/auth.service';\nconst style = {\n  h1: {\n    marginTop: '3em'\n  },\n  h2: {\n    margin: '4em 0em 2em'\n  },\n  h3: {\n    marginTop: '2em',\n    padding: '2em 0em'\n  },\n  last: {\n    marginBottom: '300px'\n  }\n};\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props); // redirect to home if already logged in\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      authenticationService.login(this.state.username, this.state.password).then(auth => {\n        if (auth) {\n          console.log('login success', auth);\n          const params = new URLSearchParams(this.props.location.search);\n          let next = params.get('next') || '/';\n          this.props.history.push(next);\n        }\n      });\n    };\n\n    this.handletest = e => {\n      e.preventDefault();\n      Fetch('http://localhost:8002/api/user/me/');\n      const requestOptions = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      Fetch('http://localhost:8002/api/user/me/').then(handleResponse).then(data => {\n        console.log('me');\n        console.log(data);\n      });\n    };\n\n    if (authenticationService.currentUser) {\n      console.log('user ', authenticationService.currentUser);\n      authenticationService.logout();\n      this.props.history.push('/chat/mayajama/');\n    }\n\n    this.state = {\n      username: null,\n      password: null,\n      auth: null\n    };\n  }\n\n  componentDidMount() {\n    authenticationService.auth.subscribe(auth => this.setState({\n      auth\n    }));\n  }\n\n  logout() {\n    authenticationService.logout();\n    history.push('/login/');\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h1\",\n      content: \"Login\",\n      style: style.h1,\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, \"Usernane or Email\"), /*#__PURE__*/React.createElement(Form.Input, {\n      onChange: e => this.setState({\n        username: e.target.value\n      }),\n      placeholder: \"Username or Email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(Form.Input, {\n      type: \"password\",\n      onChange: e => this.setState({\n        password: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Form.Button, {\n      fluid: true,\n      type: \"submit\",\n      disabled: !(this.state.username && this.state.password),\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 19\n      }\n    }, \"Submit\")), /*#__PURE__*/React.createElement(Button, {\n      fluid: true,\n      color: \"red\",\n      type: \"submit\",\n      disabled: !(this.state.username && this.state.password),\n      onClick: this.handletest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, \"Test\"));\n  }\n\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/Users/tobeyasinugo/dev/facechat_django/frontend/src/pages/login.js"],"names":["React","withRouter","Form","Checkbox","Button","Container","Segment","Header","Input","history","Fetch","handleResponse","authenticationService","style","h1","marginTop","h2","margin","h3","padding","last","marginBottom","Login","Component","constructor","props","handleSubmit","e","preventDefault","login","state","username","password","then","auth","console","log","params","URLSearchParams","location","search","next","get","push","handletest","requestOptions","method","headers","data","currentUser","logout","componentDidMount","subscribe","setState","render","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport { Form, Checkbox, Button, Container, Segment, Header, Input } from 'semantic-ui-react'\n\nimport { history } from '../helpers/history';\nimport { Fetch } from '../helpers/auth-request';\nimport { handleResponse } from '../helpers/handle-response';\nimport { authenticationService } from '../services/auth.service';\n\nconst style = {\n    h1: {\n      marginTop: '3em',\n    },\n    h2: {\n      margin: '4em 0em 2em',\n    },\n    h3: {\n      marginTop: '2em',\n      padding: '2em 0em',\n    },\n    last: {\n      marginBottom: '300px',\n    },\n  }\n\n  class Login extends React.Component {\n    constructor(props) {\n      super(props);\n\n      // redirect to home if already logged in\n      if (authenticationService.currentUser) { \n        console.log('user ', authenticationService.currentUser)\n        authenticationService.logout();\n        this.props.history.push('/chat/mayajama/');\n         \n      }\n\n      this.state = {\n          username: null,\n          password: null,\n          auth: null\n      };\n  }\n\n  componentDidMount() {\n    authenticationService.auth.subscribe(auth => this.setState({ auth }));\n  }\n\n\n  logout() {\n      authenticationService.logout();\n      history.push('/login/');\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    authenticationService.login(this.state.username, this.state.password).then(auth => {\n      if (auth) {\n        console.log('login success', auth)\n        const params = new URLSearchParams(this.props.location.search );\n        let next = params.get('next') || '/'\n        this.props.history.push(next);\n      }\n    })\n         \n    \n  }\n\n  handletest = (e) => {\n    e.preventDefault();\n    Fetch('http://localhost:8002/api/user/me/')\n\n    const requestOptions = {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' },\n  };\n\n    Fetch('http://localhost:8002/api/user/me/')\n    .then(handleResponse)\n    .then(data => { \n      console.log('me')\n      console.log(data)\n    })\n  \n  }\n\n  \n    render() {\n      return (\n        <Container>\n            <Header as='h1' content='Login' style={style.h1} textAlign='center' />\n                <Form>\n                <Form.Field>\n                    <label>Usernane or Email</label>\n                    <Form.Input  \n                    onChange={(e) => this.setState({username: e.target.value})}\n                    placeholder='Username or Email' />\n                </Form.Field>\n                <Form.Field>\n                    <label>Password</label>\n                    <Form.Input \n                    type='password' \n                    onChange={(e) => this.setState({password: e.target.value})} />\n                </Form.Field>\n                  <Form.Button\n                    fluid\n                    type='submit' \n                    disabled = {!(this.state.username && this.state.password)}\n                    onClick={this.handleSubmit} >Submit\n                    </Form.Button>\n                </Form>\n\n                <Button\n                    fluid\n                    color='red'\n                    type='submit' \n                    disabled = {!(this.state.username && this.state.password)}\n                    onClick={this.handletest} >Test\n              </Button>\n        </Container>\n        );\n      }\n    \n    }\n    export default withRouter(Login)"]},"metadata":{},"sourceType":"module"}